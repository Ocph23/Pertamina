<div class="profile">
    <div class="profile-biodata">
        <h5>PROFILE</h5>
        <div class="profile-biodata-body">
            <div class="photo">
                <img id="photo" ng-model="model.photo" ng-src="images/profiles/{{model.photo}}" />
            </div>

            <hr />
            <div class="biodata-data">
                <div class="form-info-group">
                    <div class="label">Nama</div>
                    <div class="nilai">{{model.namakaryawan}}</div>
                </div>
                <div class="form-info-group">
                    <div class="label">Jabatan</div>
                    <div class="nilai">{{model.jabatan}}</div>
                </div>
                <div class="form-info-group">
                    <div class="label">Nama Perusahaan</div>
                    <div class="nilai">{{model.perusahaan.namaperusahaan}}</div>
                </div>

                <form ng-if="profile.InRole('manager') || profile.InRole('administrator')">
                    <div class="form-info-group">
                        <div class="label">Roles</div>
                        <div class="nilai"><span style="margin-right:10px" ng-repeat="item in helper.roles"><input
                                    ng-change="onChangeRole(model,item)" type="checkbox"
                                    ng-model="item.checked">{{item.role}}</span> </div>
                    </div>
                </form>

            </div>

            <div class="point">
                <div class="point-title">Poin</div>
                <div class="chart">
                    <canvas id="chartPoint"></canvas>
                </div>
            </div>

        </div>

    </div>
    <div class="profile-grafik">
        <h5>GRAFIK</h5>
    </div>
    <div class="profile-data">
        <h5>DAFTAR PELANGGARAN</h5>
        <div class="profile-data-date">
            <div class="form-info-group">
                <div class="label">Bulan</div>
                <div class="nilai">
                    <select class="form-control" ng-options="bln as bln.name for bln in helper.bulans" ng-model="bulan">
                    </select>
                </div>
            </div>
            <div class="form-info-group">
                <div class="label">Tahun</div>
                <div class="nilai"> <select class="form-control" ng-options="thn as thn for thn in helper.tahuns()"
                        ng-model="tahun">
                    </select>
                </div>
            </div>
        </div>

        <hr />

        <div class="vertical-scroll" style="height: 73vh;">
            <table class="table table-dark table-hover table-bordered tableFixHead">
                <thead>
                    <tr class="tcenter">
                        <th class="tcenter" rowspan="2">Tanggal</th>
                        <th class="tcenter" rowspan="2">Level</th>
                        <th class="tcenter" rowspan="2">Pelanggaran</th>
                        <th class="tcenter" colspan="2">Pengurangan </th>
                        <th class="tcenter" rowspan="2">Bukti</th>
                    </tr>
                    <tr class="trcenter">
                        <th class="tcenter">Karyawan</th>
                        <th class="tcenter">Perusahaan</th>
                    </tr>
                </thead>
                <tbody class="vertical-scroll">
                    <tr ng-repeat="item in model.pelanggaran |filter : myFilter(bulan, tahun)">
                        <td class="tcenter">{{item.tanggal| date:'dd-MM-yyyy hh:ss'}}</td>
                        <td>{{item.level.level}}</td>
                        <td>{{item.jenispelanggaran.jenispelanggaran}}</td>
                        <td class="text-center">{{item.karyawan}}</td>
                        <td class="text-center">{{item.perusahaan}}</td>
                        <td class="text-center"><i class="fa fa-list text-info" data-toggle="modal" data-target="#bukti"
                                ng-click="selectBukti(item.files)"></i></td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
</div>


<div class="modal fade" id="bukti" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Bukti Pelanggaran</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="buktishow" id="filePanel">
                    <div></div>
                    <div class="dropBox" id="imgPelanggaran">
                        <img id="picture" height="100%" width="100%" alt="">
                        <video id="myvideo" height="100%" width="100%" controls>
                        </video>
                    </div>
                    <div class="files">
                        <div class="thumb" ng-repeat="file in selectedFiles">
                            <img ng-src="/bukti/thumbs/{{file.thumb}}" ng-click="selectFile(file)">
                        </div>
                    </div>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>